<div fxLayout="row" style="min-height: 500px">
  <div fxFlex=""></div>
  <div class="container content-container" style="height: 100%" fxLayout="column" *ngIf="article | async as article">
    <div class="article-view">
      <p class="mat-headline article-title">{{article.title}}</p>
      <div [innerHTML]="article.content"></div>
            <div class="registration">
              <mat-vertical-stepper linear #stepper>
                <ng-template matStepperIcon="edit">
                  <mat-icon>check</mat-icon>
                </ng-template>
                <!--                step-1             -->
                <mat-step [stepControl]="termsForm" editable>
                  <form [formGroup]="termsForm">
                    <ng-template matStepLabel>Terms of condition</ng-template>
                    <ng-container *ngIf="toc | async as toc">
                      <div [innerHTML]="toc.content"></div>
                    </ng-container>
                      <mat-checkbox class="example-margin" formControlName="isAccepted" (change)="goForward(stepper);" required>Agree</mat-checkbox>
                  </form>
                </mat-step>
                <!--                step-2            -->
                <mat-step>
                  <ng-template matStepLabel>Order</ng-template>
                  <ng-container *ngFor="let item of registrations; let i = index">
                    <app-registration-form [(badge)]="registrations[i]" [index] = i>
                      <button mat-icon-button (click)="remove(i)">
                        <mat-icon>clear</mat-icon>
                      </button>
                    </app-registration-form>
                  </ng-container>
                  <div fxLayout="column">
                    <button mat-flat-button style="background-color: rgba(0,0,0,0.2)" (click)="addRegistration()" fxFlex="">Add</button>
                    <button mat-flat-button color="accent" (click)="orderDone(stepper)" style="margin-top: 4px">Save and continue</button>
                  </div>
                </mat-step>
                <!--                step-3            -->
                <mat-step>
                  <ng-template matStepLabel>Order summary</ng-template>
                  <ng-container *ngIf="orderDataForum[0]?.QTY">
                    <p class="mat-headline" style="text-transform: capitalize;margin: 8px 0 0 0">Forum badge</p>
                    <table mat-table [dataSource]="orderDataForum">
                      <ng-container matColumnDef="price">
                        <th mat-header-cell *matHeaderCellDef> Price </th>
                        <td mat-cell *matCellDef="let element"> {{element.price  | currency: 'MNT ' : 'symbol':'1.0-0' }} </td>
                      </ng-container>
                      <ng-container matColumnDef="qty">
                        <th mat-header-cell *matHeaderCellDef> QTY </th>
                        <td mat-cell *matCellDef="let element"> {{element.QTY}} </td>
                      </ng-container>
                      <ng-container matColumnDef="subtotal">
                        <th mat-header-cell *matHeaderCellDef> Subtotal </th>
                        <td mat-cell *matCellDef="let element"> {{element.subtotal | currency: 'MNT ' : 'symbol' : '1.0-0'}} </td>
                      </ng-container>
                      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    </table>
                  </ng-container>
                  <ng-container *ngIf="orderDataOnline[0]?.QTY">
                    <p class="mat-headline" style="text-transform: capitalize;margin: 8px 0 0 0">Online badge</p>
                    <table mat-table [dataSource]="orderDataOnline">
                      <ng-container matColumnDef="price">
                        <th mat-header-cell *matHeaderCellDef> Price </th>
                        <td mat-cell *matCellDef="let element"> {{element.price  | currency: 'USD ' : 'symbol':'1.0-0' }} </td>
                      </ng-container>
                      <ng-container matColumnDef="qty">
                        <th mat-header-cell *matHeaderCellDef> QTY </th>
                        <td mat-cell *matCellDef="let element"> {{element.QTY}} </td>
                      </ng-container>
                      <ng-container matColumnDef="subtotal">
                        <th mat-header-cell *matHeaderCellDef> Subtotal </th>
                        <td mat-cell *matCellDef="let element"> {{element.subtotal | currency: 'USD ' : 'symbol' : '1.0-0'}} </td>
                      </ng-container>
                      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                    </table>
                  </ng-container>
                  <button mat-flat-button color="accent" matStepperNext >Accept</button>
                </mat-step>
                <!--                step-3            -->
                <mat-step [stepControl]="paymentForm">
                  <form [formGroup]="paymentForm">
                    <ng-template matStepLabel>Payment type</ng-template>
                    <!--                  <p>Currently we accept bank transfer</p>-->
                    <label style="margin: 0 8px 0 0">Payment type: </label>
                    <mat-radio-group formControlName="paymentType" >
                      <mat-radio-button value="forum" style="margin: 0 8px 0 0">Bank transfer by invoice</mat-radio-button>
                      <mat-radio-button  value="online" disabled>Credit card</mat-radio-button>
                    </mat-radio-group>
                    <div fxLayout="column" *ngIf="paymentForm.value?.paymentType === 'forum'">
                      <mat-form-field>
                        <mat-label>Email</mat-label>
                        <input matInput placeholder="email" formControlName="invoiceEmail" required>
                        <mat-hint>*Invoice will be delivered to this email address.</mat-hint>
                      </mat-form-field>
                      <mat-form-field>
                        <mat-label>Organization</mat-label>
                        <input matInput placeholder="email" formControlName="invoiceCompany" required>
                        <mat-hint>*Should be cyrillic if you want received Mongolian invoice.</mat-hint>
                      </mat-form-field>
                    </div>
                    <div>
                      <button mat-button (click)="finishStep()">Confirm your order</button>
                    </div>
                  </form>
                </mat-step>
              </mat-vertical-stepper>
            </div>
          </div>
  </div>
  <div fxFlex=""></div>
</div>
